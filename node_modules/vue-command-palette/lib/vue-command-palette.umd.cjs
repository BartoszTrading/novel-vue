(function(P,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(P=typeof globalThis<"u"?globalThis:P||self,i(P.VueCommandPalette={},P.Vue))})(this,function(P,i){"use strict";var de;const fe=typeof window<"u",De=n=>typeof n=="string",Y=()=>{};fe&&((de=window==null?void 0:window.navigator)!=null&&de.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function te(n){return typeof n=="function"?n():i.unref(n)}function je(n,e){function t(...s){n(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})}return t}function Ge(n,e={}){let t,s;return o=>{const c=te(n),a=te(e.maxWait);if(t&&clearTimeout(t),c<=0||a!==void 0&&a<=0)return s&&(clearTimeout(s),s=null),o();a&&!s&&(s=setTimeout(()=>{t&&clearTimeout(t),s=null,o()},a)),t=setTimeout(()=>{s&&clearTimeout(s),s=null,o()},c)}}function Ue(n){return n}function We(n){return i.getCurrentScope()?(i.onScopeDispose(n),!0):!1}function ze(n,e=200,t={}){return je(Ge(e,t),n)}function ne(n,e=200,t={}){if(e<=0)return n;const s=i.ref(n.value),r=ze(()=>{s.value=n.value},e,t);return i.watch(n,()=>r()),s}function me(n,e,t){return i.watch(n,(s,r,o)=>{s&&e(s,r,o)},t)}function He(n){var e;const t=te(n);return(e=t==null?void 0:t.$el)!=null?e:t}const pe=fe?window:void 0;function J(...n){let e,t,s,r;if(De(n[0])?([t,s,r]=n,e=pe):[e,t,s,r]=n,!e)return Y;let o=Y;const c=i.watch(()=>He(e),l=>{o(),l&&(l.addEventListener(t,s,r),o=()=>{l.removeEventListener(t,s,r),o=Y})},{immediate:!0,flush:"post"}),a=()=>{c(),o()};return We(a),a}const ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_e="__vueuse_ssr_handlers__";ge[_e]=ge[_e]||{};const Qe={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function Ye(n={}){const{reactive:e=!1,target:t=pe,aliasMap:s=Qe,passive:r=!0,onEventFired:o=Y}=n,c=i.reactive(new Set),a={toJSON(){return{}},current:c},l=e?i.reactive(a):a,h=new Set,d=new Set;function f(m,_){m in l&&(e?l[m]=_:l[m].value=_)}function g(){for(const m of d)f(m,!1)}function S(m,_){var w,x;const M=(w=m.key)==null?void 0:w.toLowerCase(),G=[(x=m.code)==null?void 0:x.toLowerCase(),M].filter(Boolean);M&&(_?c.add(M):c.delete(M));for(const O of G)d.add(O),f(O,_);M==="meta"&&!_?(h.forEach(O=>{c.delete(O),f(O,!1)}),h.clear()):typeof m.getModifierState=="function"&&m.getModifierState("Meta")&&_&&[...c,...G].forEach(O=>h.add(O))}J(t,"keydown",m=>(S(m,!0),o(m)),{passive:r}),J(t,"keyup",m=>(S(m,!1),o(m)),{passive:r}),J("blur",g,{passive:!0}),J("focus",g,{passive:!0});const y=new Proxy(l,{get(m,_,w){if(typeof _!="string")return Reflect.get(m,_,w);if(_=_.toLowerCase(),_ in s&&(_=s[_]),!(_ in l))if(/[+_-]/.test(_)){const M=_.split(/[+_-]/g).map(L=>L.trim());l[_]=i.computed(()=>M.every(L=>i.unref(y[L])))}else l[_]=i.ref(!1);const x=Reflect.get(m,_,w);return e?i.unref(x):x}});return y}var ye;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(ye||(ye={}));var Je=Object.defineProperty,Ee=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,Se=(n,e,t)=>e in n?Je(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qe=(n,e)=>{for(var t in e||(e={}))Xe.call(e,t)&&Se(n,t,e[t]);if(Ee)for(var t of Ee(e))Ze.call(e,t)&&Se(n,t,e[t]);return n};qe({linear:Ue},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function N(n){return Array.isArray?Array.isArray(n):Me(n)==="[object Array]"}const et=1/0;function tt(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-et?"-0":e}function nt(n){return n==null?"":tt(n)}function T(n){return typeof n=="string"}function Ie(n){return typeof n=="number"}function st(n){return n===!0||n===!1||rt(n)&&Me(n)=="[object Boolean]"}function we(n){return typeof n=="object"}function rt(n){return we(n)&&n!==null}function C(n){return n!=null}function se(n){return!n.trim().length}function Me(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Sn="Extended search is not available",ot="Incorrect 'index' type",it=n=>`Invalid value for key ${n}`,ct=n=>`Pattern length exceeds max of ${n}.`,at=n=>`Missing ${n} property in key`,lt=n=>`Property 'weight' in key '${n}' must be a positive integer`,be=Object.prototype.hasOwnProperty;class ut{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let r=xe(s);t+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function xe(n){let e=null,t=null,s=null,r=1,o=null;if(T(n)||N(n))s=n,e=ke(n),t=re(n);else{if(!be.call(n,"name"))throw new Error(at("name"));const c=n.name;if(s=c,be.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(lt(c));e=ke(c),t=re(c),o=n.getFn}return{path:e,id:t,weight:r,src:s,getFn:o}}function ke(n){return N(n)?n:n.split(".")}function re(n){return N(n)?n.join("."):n}function ht(n,e){let t=[],s=!1;const r=(o,c,a)=>{if(C(o))if(!c[a])t.push(o);else{let l=c[a];const h=o[l];if(!C(h))return;if(a===c.length-1&&(T(h)||Ie(h)||st(h)))t.push(nt(h));else if(N(h)){s=!0;for(let d=0,f=h.length;d<f;d+=1)r(h[d],c,a+1)}else c.length&&r(h,c,a+1)}};return r(n,T(e)?e.split("."):e,0),s?t:t[0]}var p={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:ht,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const dt=/[^ ]+/g;function ft(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(r){const o=r.match(dt).length;if(t.has(o))return t.get(o);const c=1/Math.pow(o,.5*n),a=parseFloat(Math.round(c*s)/s);return t.set(o,a),a},clear(){t.clear()}}}class oe{constructor({getFn:e=p.getFn,fieldNormWeight:t=p.fieldNormWeight}={}){this.norm=ft(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,T(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();T(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!C(e)||se(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((r,o)=>{let c=r.getFn?r.getFn(e):this.getFn(e,r.path);if(C(c)){if(N(c)){let a=[];const l=[{nestedArrIndex:-1,value:c}];for(;l.length;){const{nestedArrIndex:h,value:d}=l.pop();if(C(d))if(T(d)&&!se(d)){let f={v:d,i:h,n:this.norm.get(d)};a.push(f)}else N(d)&&d.forEach((f,g)=>{l.push({nestedArrIndex:g,value:f})})}s.$[o]=a}else if(T(c)&&!se(c)){let a={v:c,n:this.norm.get(c)};s.$[o]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Ae(n,e,{getFn:t=p.getFn,fieldNormWeight:s=p.fieldNormWeight}={}){const r=new oe({getFn:t,fieldNormWeight:s});return r.setKeys(n.map(xe)),r.setSources(e),r.create(),r}function mt(n,{getFn:e=p.getFn,fieldNormWeight:t=p.fieldNormWeight}={}){const{keys:s,records:r}=n,o=new oe({getFn:e,fieldNormWeight:t});return o.setKeys(s),o.setIndexRecords(r),o}function X(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:r=p.distance,ignoreLocation:o=p.ignoreLocation}={}){const c=e/n.length;if(o)return c;const a=Math.abs(s-t);return r?c+a/r:a?1:c}function pt(n=[],e=p.minMatchCharLength){let t=[],s=-1,r=-1,o=0;for(let c=n.length;o<c;o+=1){let a=n[o];a&&s===-1?s=o:!a&&s!==-1&&(r=o-1,r-s+1>=e&&t.push([s,r]),s=-1)}return n[o-1]&&o-s>=e&&t.push([s,o-1]),t}const V=32;function gt(n,e,t,{location:s=p.location,distance:r=p.distance,threshold:o=p.threshold,findAllMatches:c=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,includeMatches:l=p.includeMatches,ignoreLocation:h=p.ignoreLocation}={}){if(e.length>V)throw new Error(ct(V));const d=e.length,f=n.length,g=Math.max(0,Math.min(s,f));let S=o,y=g;const m=a>1||l,_=m?Array(f):[];let w;for(;(w=n.indexOf(e,y))>-1;){let A=X(e,{currentLocation:w,expectedLocation:g,distance:r,ignoreLocation:h});if(S=Math.min(A,S),y=w+d,m){let R=0;for(;R<d;)_[w+R]=1,R+=1}}y=-1;let x=[],M=1,L=d+f;const G=1<<d-1;for(let A=0;A<d;A+=1){let R=0,v=L;for(;R<v;)X(e,{errors:A,currentLocation:g+v,expectedLocation:g,distance:r,ignoreLocation:h})<=S?R=v:L=v,v=Math.floor((L-R)/2+R);L=v;let z=Math.max(1,g-v+1),B=c?f:Math.min(g+v,f)+d,$=Array(B+2);$[B+1]=(1<<A)-1;for(let k=B;k>=z;k-=1){let U=k-1,Q=t[n.charAt(U)];if(m&&(_[U]=+!!Q),$[k]=($[k+1]<<1|1)&Q,A&&($[k]|=(x[k+1]|x[k])<<1|1|x[k+1]),$[k]&G&&(M=X(e,{errors:A,currentLocation:U,expectedLocation:g,distance:r,ignoreLocation:h}),M<=S)){if(S=M,y=U,y<=g)break;z=Math.max(1,2*g-y)}}if(X(e,{errors:A+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:h})>S)break;x=$}const O={isMatch:y>=0,score:Math.max(.001,M)};if(m){const A=pt(_,a);A.length?l&&(O.indices=A):O.isMatch=!1}return O}function _t(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const r=n.charAt(t);e[r]=(e[r]||0)|1<<s-t-1}return e}class Ce{constructor(e,{location:t=p.location,threshold:s=p.threshold,distance:r=p.distance,includeMatches:o=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:r,includeMatches:o,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:h},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(g,S)=>{this.chunks.push({pattern:g,alphabet:_t(g),startIndex:S})},f=this.pattern.length;if(f>V){let g=0;const S=f%V,y=f-S;for(;g<y;)d(this.pattern.substr(g,V),g),g+=V;if(S){const m=f-V;d(this.pattern.substr(m),m)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let y={isMatch:!0,score:0};return s&&(y.indices=[[0,e.length-1]]),y}const{location:r,distance:o,threshold:c,findAllMatches:a,minMatchCharLength:l,ignoreLocation:h}=this.options;let d=[],f=0,g=!1;this.chunks.forEach(({pattern:y,alphabet:m,startIndex:_})=>{const{isMatch:w,score:x,indices:M}=gt(e,y,m,{location:r+_,distance:o,threshold:c,findAllMatches:a,minMatchCharLength:l,includeMatches:s,ignoreLocation:h});w&&(g=!0),f+=x,w&&M&&(d=[...d,...M])});let S={isMatch:g,score:g?f/this.chunks.length:1};return g&&s&&(S.indices=d),S}}class F{constructor(e){this.pattern=e}static isMultiMatch(e){return Oe(e,this.multiRegex)}static isSingleMatch(e){return Oe(e,this.singleRegex)}search(){}}function Oe(n,e){const t=n.match(e);return t?t[1]:null}class yt extends F{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Et extends F{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class St extends F{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class It extends F{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class wt extends F{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Mt extends F{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Re extends F{constructor(e,{location:t=p.location,threshold:s=p.threshold,distance:r=p.distance,includeMatches:o=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:a=p.minMatchCharLength,isCaseSensitive:l=p.isCaseSensitive,ignoreLocation:h=p.ignoreLocation}={}){super(e),this._bitapSearch=new Ce(e,{location:t,threshold:s,distance:r,includeMatches:o,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Le extends F{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const r=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+o,r.push([s,t-1]);const c=!!r.length;return{isMatch:c,score:c?0:1,indices:r}}}const ie=[yt,Le,St,It,Mt,wt,Et,Re],Te=ie.length,bt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xt="|";function kt(n,e={}){return n.split(xt).map(t=>{let s=t.trim().split(bt).filter(o=>o&&!!o.trim()),r=[];for(let o=0,c=s.length;o<c;o+=1){const a=s[o];let l=!1,h=-1;for(;!l&&++h<Te;){const d=ie[h];let f=d.isMultiMatch(a);f&&(r.push(new d(f,e)),l=!0)}if(!l)for(h=-1;++h<Te;){const d=ie[h];let f=d.isSingleMatch(a);if(f){r.push(new d(f,e));break}}}return r})}const At=new Set([Re.type,Le.type]);class Ct{constructor(e,{isCaseSensitive:t=p.isCaseSensitive,includeMatches:s=p.includeMatches,minMatchCharLength:r=p.minMatchCharLength,ignoreLocation:o=p.ignoreLocation,findAllMatches:c=p.findAllMatches,location:a=p.location,threshold:l=p.threshold,distance:h=p.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:r,findAllMatches:c,ignoreLocation:o,location:a,threshold:l,distance:h},this.pattern=t?e:e.toLowerCase(),this.query=kt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let o=0,c=[],a=0;for(let l=0,h=t.length;l<h;l+=1){const d=t[l];c.length=0,o=0;for(let f=0,g=d.length;f<g;f+=1){const S=d[f],{isMatch:y,indices:m,score:_}=S.search(e);if(y){if(o+=1,a+=_,s){const w=S.constructor.type;At.has(w)?c=[...c,...m]:c.push(m)}}else{a=0,o=0,c.length=0;break}}if(o){let f={isMatch:!0,score:a/o};return s&&(f.indices=c),f}}return{isMatch:!1,score:1}}}const ce=[];function Ot(...n){ce.push(...n)}function ae(n,e){for(let t=0,s=ce.length;t<s;t+=1){let r=ce[t];if(r.condition(n,e))return new r(n,e)}return new Ce(n,e)}const Z={AND:"$and",OR:"$or"},le={PATH:"$path",PATTERN:"$val"},ue=n=>!!(n[Z.AND]||n[Z.OR]),Rt=n=>!!n[le.PATH],Lt=n=>!N(n)&&we(n)&&!ue(n),ve=n=>({[Z.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function $e(n,e,{auto:t=!0}={}){const s=r=>{let o=Object.keys(r);const c=Rt(r);if(!c&&o.length>1&&!ue(r))return s(ve(r));if(Lt(r)){const l=c?r[le.PATH]:o[0],h=c?r[le.PATTERN]:r[l];if(!T(h))throw new Error(it(l));const d={keyId:re(l),pattern:h};return t&&(d.searcher=ae(h,e)),d}let a={children:[],operator:o[0]};return o.forEach(l=>{const h=r[l];N(h)&&h.forEach(d=>{a.children.push(s(d))})}),a};return ue(n)||(n=ve(n)),s(n)}function Tt(n,{ignoreFieldNorm:e=p.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:r,norm:o,score:c})=>{const a=r?r.weight:null;s*=Math.pow(c===0&&a?Number.EPSILON:c,(a||1)*(e?1:o))}),t.score=s})}function vt(n,e){const t=n.matches;e.matches=[],C(t)&&t.forEach(s=>{if(!C(s.indices)||!s.indices.length)return;const{indices:r,value:o}=s;let c={indices:r,value:o};s.key&&(c.key=s.key.src),s.idx>-1&&(c.refIndex=s.idx),e.matches.push(c)})}function $t(n,e){e.score=n.score}function Nt(n,e,{includeMatches:t=p.includeMatches,includeScore:s=p.includeScore}={}){const r=[];return t&&r.push(vt),s&&r.push($t),n.map(o=>{const{idx:c}=o,a={item:e[c],refIndex:c};return r.length&&r.forEach(l=>{l(o,a)}),a})}class D{constructor(e,t={},s){this.options={...p,...t},this.options.useExtendedSearch,this._keyStore=new ut(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof oe))throw new Error(ot);this._myIndex=t||Ae(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){C(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,r=this._docs.length;s<r;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:o,sortFn:c,ignoreFieldNorm:a}=this.options;let l=T(e)?T(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Tt(l,{ignoreFieldNorm:a}),o&&l.sort(c),Ie(t)&&t>-1&&(l=l.slice(0,t)),Nt(l,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const t=ae(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:o,i:c,n:a})=>{if(!C(o))return;const{isMatch:l,score:h,indices:d}=t.searchIn(o);l&&r.push({item:o,idx:c,matches:[{score:h,value:o,norm:a,indices:d}]})}),r}_searchLogical(e){const t=$e(e,this.options),s=(a,l,h)=>{if(!a.children){const{keyId:f,searcher:g}=a,S=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:g});return S&&S.length?[{idx:h,item:l,matches:S}]:[]}const d=[];for(let f=0,g=a.children.length;f<g;f+=1){const S=a.children[f],y=s(S,l,h);if(y.length)d.push(...y);else if(a.operator===Z.AND)return[]}return d},r=this._myIndex.records,o={},c=[];return r.forEach(({$:a,i:l})=>{if(C(a)){let h=s(t,a,l);h.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},c.push(o[l])),h.forEach(({matches:d})=>{o[l].matches.push(...d)}))}}),c}_searchObjectList(e){const t=ae(e,this.options),{keys:s,records:r}=this._myIndex,o=[];return r.forEach(({$:c,i:a})=>{if(!C(c))return;let l=[];s.forEach((h,d)=>{l.push(...this._findMatches({key:h,value:c[d],searcher:t}))}),l.length&&o.push({idx:a,item:c,matches:l})}),o}_findMatches({key:e,value:t,searcher:s}){if(!C(t))return[];let r=[];if(N(t))t.forEach(({v:o,i:c,n:a})=>{if(!C(o))return;const{isMatch:l,score:h,indices:d}=s.searchIn(o);l&&r.push({score:h,key:e,value:o,idx:c,norm:a,indices:d})});else{const{v:o,n:c}=t,{isMatch:a,score:l,indices:h}=s.searchIn(o);a&&r.push({score:l,key:e,value:o,norm:c,indices:h})}return r}}D.version="6.6.2",D.createIndex=Ae,D.parseIndex=mt,D.config=p,D.parseQuery=$e,Ot(Ct);const W=i.reactive({selectedNode:"",selectedGroup:"",shouldRerender:!1,search:"",filtered:{count:0,items:new Map,groups:new Set}}),j=()=>({isSearching:i.computed(()=>W.search!==""),resetStore:()=>{W.search="",W.filtered.count=0,W.filtered.items=new Map,W.filtered.groups=new Set},...i.toRefs(W)});function Pt(n){return{all:n=n||new Map,on:function(e,t){var s=n.get(e);s?s.push(t):n.set(e,[t])},off:function(e,t){var s=n.get(e);s&&(t?s.splice(s.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var s=n.get(e);s&&s.slice().map(function(r){r(t)}),(s=n.get("*"))&&s.slice().map(function(r){r(e,t)})}}}const Ft=Pt(),q=()=>({emitter:Ft});function Bt(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Kt(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}const Vt=["command-theme"],Dt={"command-root":""},jt=i.defineComponent({name:"CommandRoot"}),he=i.defineComponent({...jt,props:{theme:{type:String,default:"default"},fuseOptions:{type:Object,default:()=>({threshold:.2,keys:["label"]})}},emits:["select-item"],setup(n,{emit:e}){const t=n,s='[command-item=""]',r="command-item-key",o='[command-group=""]',c="command-group-key",a='[command-group-heading=""]',l=`${s}:not([aria-disabled="true"])`,h=`${s}[aria-selected="true"]`,d="command-item-select",f="data-value";i.provide("theme",t.theme||"default");const{selectedNode:g,search:S,filtered:y,shouldRerender:m}=j(),{emitter:_}=q(),w=i.ref(),x=ne(i.ref(new Map),333),M=ne(i.ref(new Set),333),L=ne(i.ref(new Map)),G=i.computed(()=>{const u=[];for(const[I,E]of x.value.entries())u.push({key:I,label:E});return u}),O=i.computed(()=>{const u=D.createIndex(t.fuseOptions.keys,G.value);return new D(G.value,t.fuseOptions,u)}),A=()=>{var I,E,b;const u=R();u&&(((I=u.parentElement)==null?void 0:I.firstElementChild)===u&&((b=(E=u.closest(o))==null?void 0:E.querySelector(a))==null||b.scrollIntoView({block:"nearest"})),u.scrollIntoView({block:"nearest"}))},R=()=>{var u;return(u=w.value)==null?void 0:u.querySelector(h)},v=()=>{var I;const u=(I=w.value)==null?void 0:I.querySelectorAll(o);return u?Array.from(u):[]},z=(u=w.value)=>{const I=u==null?void 0:u.querySelectorAll(s);return I?Array.from(I):[]},B=(u=w.value)=>{const I=u==null?void 0:u.querySelectorAll(l);return I?Array.from(I):[]},$=()=>{const[u]=B();u&&u.getAttribute(r)&&(g.value=u.getAttribute(r)||"")},H=u=>{const E=B()[u];E&&(g.value=E.getAttribute(r)||"")},k=u=>{const I=R(),E=B(),b=E.findIndex(ee=>ee===I),K=E[b+u];K?g.value=K.getAttribute(r)||"":u>0?H(0):H(E.length-1)},U=u=>{const I=R();let E=I==null?void 0:I.closest(o),b=null;for(;E&&!b;)E=u>0?Bt(E,o):Kt(E,o),b=E==null?void 0:E.querySelector(l);b?g.value=b.getAttribute(r)||"":k(u)},Q=()=>H(0),Pe=()=>H(B().length-1),Fe=u=>{u.preventDefault(),u.metaKey?Pe():u.altKey?U(1):k(1)},Be=u=>{u.preventDefault(),u.metaKey?Q():u.altKey?U(-1):k(-1)},pn=u=>{switch(u.key){case"n":case"j":{u.ctrlKey&&Fe(u);break}case"ArrowDown":{Fe(u);break}case"p":case"k":{u.ctrlKey&&Be(u);break}case"ArrowUp":{Be(u);break}case"Home":{Q();break}case"End":{Pe();break}case"Enter":{const I=R();if(I){const E=new Event(d);I.dispatchEvent(E)}}}},Ke=()=>{if(!S.value){y.value.count=M.value.size;return}y.value.groups=new Set;const u=new Map,I=O.value.search(S.value).map(E=>E.item);for(const{key:E,label:b}of I)u.set(E,b);for(const[E,b]of L.value)for(const K of b)u.get(K)&&y.value.groups.add(E);y.value.count=u.size,y.value.items=u},Ve=()=>{const u=v(),I=z();for(const E of I){const b=E.getAttribute(r)||"",K=E.getAttribute(f)||"";M.value.add(b),x.value.set(b,K),y.value.count=x.value.size}for(const E of u){const b=z(E),K=E.getAttribute(c)||"",ee=new Set("");for(const _n of b){const yn=_n.getAttribute(r)||"";ee.add(yn)}L.value.set(K,ee)}};i.watch(()=>g.value,u=>{u&&i.nextTick(A)},{deep:!0}),i.watch(()=>S.value,()=>{m.value||(Ke(),i.nextTick($))}),_.on("selectItem",u=>{e("select-item",u)});const gn=u=>{u&&(m.value=u,Ve(),i.nextTick(()=>{Ke(),$(),m.value=!1}))};return _.on("rerenderList",gn),i.onMounted(()=>{Ve(),i.nextTick($)}),(u,I)=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(n.theme),onKeydown:pn,ref_key:"commandRef",ref:w,"command-theme":n.theme},[i.createElementVNode("div",Dt,[i.renderSlot(u.$slots,"default")])],42,Vt))}}),Gt={"command-dialog":""},Ut={"command-dialog-mask":""},Wt={"command-dialog-wrapper":""},zt={"command-dialog-header":""},Ht={"command-dialog-body":""},Qt={key:0,"command-dialog-footer":""},Yt=i.defineComponent({name:"Command.Dialog"}),Jt=i.defineComponent({...Yt,props:{visible:{type:Boolean},theme:{}},emits:["select-item"],setup(n,{emit:e}){const t=n,{resetStore:s}=j(),{emitter:r}=q(),o=i.ref();return r.on("selectItem",c=>{e("select-item",c)}),me(()=>t.visible,s),i.onBeforeUnmount(s),(c,a)=>(i.openBlock(),i.createBlock(i.Teleport,{to:"body",ref_key:"dialogRef",ref:o},[i.createVNode(i.Transition,{name:"command-dialog",appear:""},{default:i.withCtx(()=>[c.visible?(i.openBlock(),i.createBlock(he,{key:0,theme:c.theme},{default:i.withCtx(()=>[i.createElementVNode("div",Gt,[i.createElementVNode("div",Ut,[i.createElementVNode("div",Wt,[i.createElementVNode("div",zt,[i.renderSlot(c.$slots,"header")]),i.createElementVNode("div",Ht,[i.renderSlot(c.$slots,"body")]),c.$slots.footer?(i.openBlock(),i.createElementBlock("div",Qt,[i.renderSlot(c.$slots,"footer")])):i.createCommentVNode("",!0)])])])]),_:3},8,["theme"])):i.createCommentVNode("",!0)]),_:3})],512))}});let Ne=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const Xt=["command-group-key","data-value"],Zt={key:0,"command-group-heading":""},qt={"command-group-items":"",role:"group"},en=i.defineComponent({name:"Command.Group"}),tn=i.defineComponent({...en,props:{heading:{}},setup(n){const e=i.computed(()=>`command-group-${Ne()}`),{filtered:t,isSearching:s}=j(),r=i.computed(()=>s.value?t.value.groups.has(e.value):!0);return(o,c)=>i.withDirectives((i.openBlock(),i.createElementBlock("div",{"command-group":"",role:"presentation",key:e.value,"command-group-key":e.value,"data-value":o.heading},[o.heading?(i.openBlock(),i.createElementBlock("div",Zt,i.toDisplayString(o.heading),1)):i.createCommentVNode("",!0),i.createElementVNode("div",qt,[i.renderSlot(o.$slots,"default")])],8,Xt)),[[i.vShow,r.value]])}}),nn=["placeholder","value"],sn=i.defineComponent({name:"Command.Input"}),rn=i.defineComponent({...sn,props:{placeholder:{},value:{}},emits:["input","update:value"],setup(n,{emit:e}){const t=i.ref(null),{search:s}=j(),r=i.computed(()=>s.value),o=c=>{const a=c,l=c.target;s.value=l==null?void 0:l.value,e("input",a),e("update:value",s.value)};return i.watchEffect(()=>{var c;(c=t.value)==null||c.focus()}),(c,a)=>(i.openBlock(),i.createElementBlock("input",{ref_key:"inputRef",ref:t,"command-input":"","auto-focus":"","auto-complete":"off","auto-correct":"off","spell-check":!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,placeholder:c.placeholder,value:r.value,onInput:o},null,40,nn))}}),on=["aria-selected","aria-disabled","command-item-key"],cn=i.defineComponent({name:"Command.Item"}),an=i.defineComponent({...cn,props:{shortcut:{},perform:{type:Function}},emits:["select"],setup(n,{emit:e}){const t=n,s="command-item-select",r="data-value",{current:o}=Ye(),{selectedNode:c,filtered:a,isSearching:l}=j(),{emitter:h}=q(),d=i.ref(),f=i.computed(()=>`command-item-${Ne()}`),g=i.computed(()=>{const m=a.value.items.get(f.value);return l.value?m!==void 0:!0}),S=i.computed(()=>Array.from(o)),y=()=>{var _;const m={key:f.value,value:((_=d.value)==null?void 0:_.getAttribute(r))||""};e("select",m),h.emit("selectItem",m)};return me(S,m=>{t.shortcut&&t.shortcut.length>0&&t.shortcut.every(w=>o.has(w.toLowerCase()))&&t.perform&&t.perform()}),i.watchEffect(()=>{var m;(m=d.value)==null||m.addEventListener(s,y)}),i.onBeforeUnmount(()=>{var m;(m=d.value)==null||m.removeEventListener(s,y)}),(m,_)=>i.withDirectives((i.openBlock(),i.createElementBlock("div",{ref_key:"itemRef",ref:d,"command-item":"",role:"option","aria-selected":i.unref(c)===f.value,"aria-disabled":!g.value,key:f.value,"command-item-key":f.value,onClick:y},[i.renderSlot(m.$slots,"default")],8,on)),[[i.vShow,g.value]])}}),ln=i.defineComponent({name:"Command.List"}),un=i.defineComponent({...ln,setup(n){const{emitter:e}=q(),t=i.ref(),s=i.ref();let r=null,o;return i.watchEffect(()=>{o=s.value;const c=t.value;let a;if(o&&c)return r=new ResizeObserver(l=>{a=requestAnimationFrame(()=>{const h=o==null?void 0:o.offsetHeight;c==null||c.style.setProperty("--command-list-height",`${h==null?void 0:h.toFixed(1)}px`),e.emit("rerenderList",!0)})}),r.observe(o),()=>{cancelAnimationFrame(a),r==null||r.unobserve(o)}}),i.onBeforeUnmount(()=>{r!==null&&o&&r.unobserve(o)}),(c,a)=>(i.openBlock(),i.createElementBlock("div",{"command-list":"",role:"listbox","aria-label":"Suggestions",ref_key:"listRef",ref:t},[i.createElementVNode("div",{"command-list-sizer":"",ref_key:"heightRef",ref:s},[i.renderSlot(c.$slots,"default")],512)],512))}}),hn=i.defineComponent({name:"Command.Empty",setup(n,{attrs:e,slots:t}){const{filtered:s}=j(),r=i.computed(()=>s.value.count===0);return()=>r.value?i.h("div",{"command-empty":"",role:"presentation",...e},t):i.h("div",{"command-empty":"hidden",role:"presentation",style:{display:"none"},...e})}}),dn=i.defineComponent({name:"Command.Loading",setup(n,{attrs:e,slots:t}){return()=>i.h("div",{"command-loading":"",role:"progressbar",...e},t)}}),fn=i.defineComponent({name:"Command.Separator",setup(n,{attrs:e,slots:t}){return()=>i.h("div",{"command-separator":"",role:"separator",...e})}}),mn=Object.assign(he,{Root:he,Dialog:Jt,Empty:hn,Group:tn,Input:rn,Item:an,List:un,Loading:dn,Separator:fn});P.Command=mn,P.useCommandState=j,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
